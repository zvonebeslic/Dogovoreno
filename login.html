<!doctype html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Prijava — Dogovoreno.com</title>
  <link rel="stylesheet" href="base.css">
</head>
<body>
  <div data-include="header.html"></div>

  <main class="container">
    <div class="card" style="padding:16px;max-width:420px;margin:24px auto">
      <h2 style="margin:0 0 8px">Prijava</h2>
      <p class="help" style="margin:0 0 12px">Prijavite se vašim e-mailom, imenom ili telefonom i lozinkom.</p>

      <form id="loginForm" class="grid" novalidate>
        <label>Email ili ime ili telefon* 
          <input id="identifier" required placeholder="npr. ime@primjer.com ili Marko ili +3876…">
        </label>
        <label>Lozinka* 
          <input id="password" type="password" required placeholder="••••••••">
        </label>
        <button class="btn btn-primary" type="submit">Prijavi se</button>
      </form>

      <p class="help" style="margin-top:12px;text-align:center">
        Nemaš profil? <a href="register.html" style="color:var(--cta)">Registriraj se</a>
      </p>
    </div>
  </main>

  <div data-include="footer.html"></div>
  <script src="include.js"></script>
  <script>
    async function api(route, method='GET', body=null){
      const res = await fetch('api/auth.php?route='+route, {
        method,
        headers:{'Content-Type':'application/json'},
        body: body ? JSON.stringify(body) : null
      });
      const j = await res.json().catch(()=>({}));
      if(!res.ok) throw new Error(j.error||'Greška');
      return j;
    }

    document.getElementById('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const identifier = document.getElementById('identifier').value.trim();
      const password   = document.getElementById('password').value;
      if(!identifier || !password){ alert('Unesite identifikator i lozinku.'); return; }
      try{
        await api('login','POST',{ identifier, password });
        // Nakon uspješne prijave vodi na uređivanje profila
        location.href = 'nudimuslugu.html';
      }catch(e){
        alert(e.message);
      }
    });
  </script>
</body>
</html>
```0
